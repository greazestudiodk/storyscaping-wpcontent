function oc_cb_validate_form(){var e=!1,r="#oc_cb_btn";jQuery("#oc_cb_errors").removeClass("show"),jQuery(".oc_cb_spinner").removeClass("success").removeClass("is-active");var s="#banner_text",o=jQuery(s).attr("maxlength"),c="#occb_rem";jQuery(c).html(jQuery(s).val().length+" / "+o),0==jQuery(s).val().length?(jQuery(s).addClass("occberror"),e=!0):(490<=jQuery(s).val().length?jQuery(c).css("display","inline-block"):(jQuery(c).css("display","none"),jQuery(s).removeClass("occberror")),jQuery(s).removeClass("maxlimit"));c="#policy_link_text";jQuery(c+":visible").length&&0==jQuery(c).val().length?(jQuery(c).addClass("occberror"),e=!0):jQuery(c).removeClass("occberror");s="#policy_link_url",c=new RegExp("(https?://(?:www.|(?!www))[a-zA-Z0-9-]+[a-zA-Z0-9-].[^s]{2,}|https?://(?:www.|(?!www))[a-zA-Z0-9].[^s]{2,}|www.[a-zA-Z0-9].[^s]{2,})");!jQuery(s+":visible").length||0!=jQuery(s).val().length&&0!=c.test(jQuery(s).val())?jQuery(s).removeClass("occberror"):(jQuery(s).addClass("occberror"),e=!0);s="#button_text";return jQuery(s).val().length?jQuery(s).removeClass("occberror"):(jQuery(s).addClass("occberror"),e=!0),e&&jQuery("#cb_enable:checked").length?(jQuery(r).attr("disabled","disabled"),!1):(jQuery(r).removeAttr("disabled"),!0)}jQuery,jQuery(document).on("change","#cb_enable",function(){jQuery(this).prop("checked")?jQuery(".fieldset.cb_fields").removeClass("show").addClass("show"):jQuery(".fieldset.cb_fields").removeClass("show")}),jQuery(document).on("change","#toggle_policy",function(){jQuery(this).prop("checked")?jQuery(".fieldset.policy_fields").removeClass("show").addClass("show"):jQuery(".fieldset.policy_fields").removeClass("show")}),jQuery(document).on("input","#oc_cb_config_form input, #oc_cb_config_form textarea",function(){setTimeout(function(){oc_cb_validate_form()},200)}),jQuery(document).on("click","#oc_cb_config_form input, #oc_cb_config_form textarea",function(e){var r,s=jQuery('input[name="banner_style"]:checked').val();if(!jQuery('input[name="show"]:checked').val())return jQuery("#banner_preview").removeClass(),!0;switch(element=jQuery(this).attr("name"),element){case"banner_style":r="fill_"+(s=jQuery(this).val());break;case"banner_text":r="text_"+s;break;case"policy_link":case"policy_link_text":case"policy_link_url":r="link_"+s;break;case"button_text":r="button_"+s;break;default:r="fill_"+s}jQuery("#banner_preview").removeClass(),jQuery("#banner_preview").addClass(r)}),jQuery(document).on("submit","#oc_cb_config_form",function(e){if(e.preventDefault(),!oc_cb_validate_form())return!1;jQuery("#oc_cb_errors").removeClass("show"),jQuery(".oc_cb_spinner").removeClass("success").addClass("is-active");e=jQuery("#oc_cb_config_form").serialize(),e={action:"oc_cb_settings",oc_cb_sec:oc_constants.oc_cb_token,settings:e};return jQuery.ajax({url:ajaxurl,type:"POST",data:e,dataType:"JSON",error:function(e,r,s){console.log(e.status+" "+e.statusText+"---"+r),jQuery("#oc_cb_errors").html("").html("Failed to save settings. Please reload the page and try again.").addClass("show"),jQuery(".oc_cb_spinner").removeClass("is-active").removeClass("success").addClass("error")},success:function(e){if(e.error)return jQuery(".oc_cb_spinner").removeClass("is-active").removeClass("success").addClass("error"),!1;jQuery(".oc_cb_spinner").removeClass("is-active").addClass("success")},statusCode:{200:function(){},404:function(){jQuery("#oc_cb_errors").html("").html("Failed to save settings. Please reload the page and try again.").addClass("show")},500:function(){jQuery("#oc_cb_errors").html("").html("Something went wrong; internal server error while processing the request!").addClass("show")}}}),!1}),jQuery(document).on("click","#oc_cb_btn",function(e){jQuery("#oc_cb_config_form").submit()});